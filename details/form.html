<!DOCTYPE html>
<html lang="en">
<head>
    <title>Student Job Application Form</title>
    <style>
        /* ... all your existing CSS ... */
    </style>
</head>
<body>

    <div class="form-container">
        <h2>Student Job Application Form</h2>

        <form id="studentApplicationForm">
            <div class="form-group">
                <label for="phone">Phone No: <span style="color: red;">*</span></label>
                <input type="tel" id="phone" name="phone" required placeholder="Your answer">
            </div>

            <div class="form-group">
                <label for="cgpa">Current CGPA <span style="color: red;">*</span></label>
                <input type="number" id="cgpa" name="cgpa" required placeholder="E.g., 8.5" step="0.01" min="0" max="10">
            </div>
            <div class="form-group">
                <label for="resume">Resume <span style="color: red;">*</span></label>
                <input type="file" id="resume" name="resume" accept=".pdf" required>
                <small style="color: #666;">Upload 1 supported file: PDF. Max 10 MB.</small>
            </div>

            <div class="button-group">
                <button type="submit">Submit Application</button>
            </div>
            <div id="responseMessage" class="alert-message" style="display: none;"></div>
        </form>
    </div>

    <script>
        // Your existing JavaScript for form submission is perfect and
        // will automatically pick up the new 'cgpa' field because
        // it uses new FormData(form). No changes needed here.
        document.getElementById('studentApplicationForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const form = e.target;
            const responseMessageDiv = document.getElementById('responseMessage');
            const formData = new FormData(form);
            
            try {
                const response = await fetch('/api/applications/apply', {
                    method: 'POST',
                    body: formData 
                });
                const result = await response.json();
                if (!response.ok) {
                    throw new Error(result.message || "An unknown error occurred.");
                }
                responseMessageDiv.textContent = result.message;
                responseMessageDiv.className = 'alert-message alert-success';
                responseMessageDiv.style.display = 'block';
                form.reset();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            } catch (error) {
                console.error("‚ùå Application submission error:", error);
                responseMessageDiv.textContent = "Application failed: " + error.message;
                responseMessageDiv.className = 'alert-message alert-danger';
                responseMessageDiv.style.display = 'block';
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        });
    </script>
</body>
</html>